{"ast":null,"code":"import _defineProperty from \"D:/projects/react/wen-base/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\n/*\nThis file is part of web3.js.\n\nweb3.js is free software: you can redistribute it and/or modify\nit under the terms of the GNU Lesser General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nweb3.js is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Lesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public License\nalong with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\nimport { isHexPrefixed, isHexString } from 'web3-validator';\nimport { bytesToHex, hexToBytes, numberToHex } from 'web3-utils';\nimport { secp256k1 } from '../tx/constants.js';\nimport { Hardfork } from './enums.js';\nimport { TypeOutput } from './types.js';\n/**\n * Removes '0x' from a given `String` if present\n * @param str the string value\n * @returns the string without 0x prefix\n */\nexport var stripHexPrefix = function stripHexPrefix(str) {\n  if (typeof str !== 'string') throw new Error(\"[stripHexPrefix] input must be type 'string', received \".concat(typeof str));\n  return isHexPrefixed(str) ? str.slice(2) : str;\n};\n/**\n * Transforms Geth formatted nonce (i.e. hex string) to 8 byte 0x-prefixed string used internally\n * @param nonce string parsed from the Geth genesis file\n * @returns nonce as a 0x-prefixed 8 byte string\n */\nfunction formatNonce(nonce) {\n  if (!nonce || nonce === '0x0') {\n    return '0x0000000000000000';\n  }\n  if (isHexPrefixed(nonce)) {\n    return \"0x\".concat(stripHexPrefix(nonce).padStart(16, '0'));\n  }\n  return \"0x\".concat(nonce.padStart(16, '0'));\n}\n/**\n * Converts a `Number` into a hex `String`\n * @param {Number} i\n * @return {String}\n */\nvar intToHex = function intToHex(i) {\n  if (!Number.isSafeInteger(i) || i < 0) {\n    throw new Error(\"Received an invalid integer type: \".concat(i));\n  }\n  return \"0x\".concat(i.toString(16));\n};\n/**\n * Converts Geth genesis parameters to an EthereumJS compatible `CommonOpts` object\n * @param json object representing the Geth genesis file\n * @param optional mergeForkIdPostMerge which clarifies the placement of MergeForkIdTransition\n * hardfork, which by default is post merge as with the merged eth networks but could also come\n * before merge like in kiln genesis\n * @returns genesis parameters in a `CommonOpts` compliant object\n */\nfunction parseGethParams(json) {\n  var _forkMap;\n  var mergeForkIdPostMerge = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var _a, _b;\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n  var name = json.name,\n    config = json.config,\n    difficulty = json.difficulty,\n    mixHash = json.mixHash,\n    gasLimit = json.gasLimit,\n    coinbase = json.coinbase,\n    baseFeePerGas = json.baseFeePerGas;\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n  var extraData = json.extraData,\n    timestamp = json.timestamp,\n    nonce = json.nonce;\n  var genesisTimestamp = Number(timestamp);\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n  var chainId = config.chainId;\n  // geth is not strictly putting empty fields with a 0x prefix\n  if (extraData === '') {\n    extraData = '0x';\n  }\n  // geth may use number for timestamp\n  if (!isHexPrefixed(timestamp)) {\n    // eslint-disable-next-line radix\n    timestamp = intToHex(parseInt(timestamp));\n  }\n  // geth may not give us a nonce strictly formatted to an 8 byte hex string\n  if (nonce.length !== 18) {\n    nonce = formatNonce(nonce);\n  }\n  // EIP155 and EIP158 are both part of Spurious Dragon hardfork and must occur at the same time\n  // but have different configuration parameters in geth genesis parameters\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  if (config.eip155Block !== config.eip158Block) {\n    throw new Error('EIP155 block number must equal EIP 158 block number since both are part of SpuriousDragon hardfork and the client only supports activating the full hardfork');\n  }\n  var params = {\n    name: name,\n    chainId: chainId,\n    networkId: chainId,\n    genesis: {\n      timestamp: timestamp,\n      // eslint-disable-next-line radix\n      gasLimit: parseInt(gasLimit),\n      // eslint-disable-next-line radix\n      difficulty: parseInt(difficulty),\n      nonce: nonce,\n      extraData: extraData,\n      mixHash: mixHash,\n      coinbase: coinbase,\n      baseFeePerGas: baseFeePerGas\n    },\n    hardfork: undefined,\n    hardforks: [],\n    bootstrapNodes: [],\n    consensus:\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    config.clique !== undefined ? {\n      type: 'poa',\n      algorithm: 'clique',\n      clique: {\n        // The recent geth genesis seems to be using blockperiodseconds\n        // and epochlength for clique specification\n        // see: https://hackmd.io/PqZgMpnkSWCWv5joJoFymQ\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-assignment\n        period: (_a = config.clique.period) !== null && _a !== void 0 ? _a : config.clique.blockperiodseconds,\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access,  @typescript-eslint/no-unsafe-assignment\n        epoch: (_b = config.clique.epoch) !== null && _b !== void 0 ? _b : config.clique.epochlength\n      }\n    } : {\n      type: 'pow',\n      algorithm: 'ethash',\n      ethash: {}\n    }\n  };\n  var forkMap = (_forkMap = {}, _defineProperty(_forkMap, Hardfork.Homestead, {\n    name: 'homesteadBlock'\n  }), _defineProperty(_forkMap, Hardfork.Dao, {\n    name: 'daoForkBlock'\n  }), _defineProperty(_forkMap, Hardfork.TangerineWhistle, {\n    name: 'eip150Block'\n  }), _defineProperty(_forkMap, Hardfork.SpuriousDragon, {\n    name: 'eip155Block'\n  }), _defineProperty(_forkMap, Hardfork.Byzantium, {\n    name: 'byzantiumBlock'\n  }), _defineProperty(_forkMap, Hardfork.Constantinople, {\n    name: 'constantinopleBlock'\n  }), _defineProperty(_forkMap, Hardfork.Petersburg, {\n    name: 'petersburgBlock'\n  }), _defineProperty(_forkMap, Hardfork.Istanbul, {\n    name: 'istanbulBlock'\n  }), _defineProperty(_forkMap, Hardfork.MuirGlacier, {\n    name: 'muirGlacierBlock'\n  }), _defineProperty(_forkMap, Hardfork.Berlin, {\n    name: 'berlinBlock'\n  }), _defineProperty(_forkMap, Hardfork.London, {\n    name: 'londonBlock'\n  }), _defineProperty(_forkMap, Hardfork.MergeForkIdTransition, {\n    name: 'mergeForkBlock',\n    postMerge: mergeForkIdPostMerge\n  }), _defineProperty(_forkMap, Hardfork.Shanghai, {\n    name: 'shanghaiTime',\n    postMerge: true,\n    isTimestamp: true\n  }), _defineProperty(_forkMap, Hardfork.ShardingForkDev, {\n    name: 'shardingForkTime',\n    postMerge: true,\n    isTimestamp: true\n  }), _forkMap);\n  // forkMapRev is the map from config field name to Hardfork\n  var forkMapRev = Object.keys(forkMap).reduce(function (acc, elem) {\n    acc[forkMap[elem].name] = elem;\n    return acc;\n  }, {});\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n  var configHardforkNames = Object.keys(config).filter(\n  // eslint-disable-next-line no-null/no-null, @typescript-eslint/no-unsafe-member-access\n  function (key) {\n    return forkMapRev[key] !== undefined && config[key] !== undefined && config[key] !== null;\n  });\n  params.hardforks = configHardforkNames.map(function (nameBlock) {\n    return {\n      name: forkMapRev[nameBlock],\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      block:\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      forkMap[forkMapRev[nameBlock]].isTimestamp === true ||\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      typeof config[nameBlock] !== 'number' ?\n      // eslint-disable-next-line no-null/no-null\n      null :\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      config[nameBlock],\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      timestamp:\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      forkMap[forkMapRev[nameBlock]].isTimestamp === true &&\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      typeof config[nameBlock] === 'number' ?\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      config[nameBlock] : undefined\n    };\n  })\n  // eslint-disable-next-line no-null/no-null\n  .filter(function (fork) {\n    return fork.block !== null || fork.timestamp !== undefined;\n  });\n  params.hardforks.sort(function (a, b) {\n    var _a, _b;\n    return ((_a = a.block) !== null && _a !== void 0 ? _a : Infinity) - ((_b = b.block) !== null && _b !== void 0 ? _b : Infinity);\n  });\n  params.hardforks.sort(function (a, b) {\n    var _a, _b;\n    return ((_a = a.timestamp) !== null && _a !== void 0 ? _a : genesisTimestamp) - ((_b = b.timestamp) !== null && _b !== void 0 ? _b : genesisTimestamp);\n  });\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  if (config.terminalTotalDifficulty !== undefined) {\n    // Following points need to be considered for placement of merge hf\n    // - Merge hardfork can't be placed at genesis\n    // - Place merge hf before any hardforks that require CL participation for e.g. withdrawals\n    // - Merge hardfork has to be placed just after genesis if any of the genesis hardforks make CL\n    //   necessary for e.g. withdrawals\n    var mergeConfig = {\n      name: Hardfork.Merge,\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-assignment\n      ttd: config.terminalTotalDifficulty,\n      // eslint-disable-next-line no-null/no-null\n      block: null\n    };\n    // Merge hardfork has to be placed before first hardfork that is dependent on merge\n    var postMergeIndex = params.hardforks.findIndex(\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    function (hf) {\n      var _a;\n      return ((_a = forkMap[hf.name]) === null || _a === void 0 ? void 0 : _a.postMerge) === true;\n    });\n    if (postMergeIndex !== -1) {\n      params.hardforks.splice(postMergeIndex, 0, mergeConfig);\n    } else {\n      params.hardforks.push(mergeConfig);\n    }\n  }\n  var latestHardfork = params.hardforks.length > 0 ? params.hardforks.slice(-1)[0] : undefined;\n  params.hardfork = latestHardfork === null || latestHardfork === void 0 ? void 0 : latestHardfork.name;\n  params.hardforks.unshift({\n    name: Hardfork.Chainstart,\n    block: 0\n  });\n  return params;\n}\n/**\n * Parses a genesis.json exported from Geth into parameters for Common instance\n * @param json representing the Geth genesis file\n * @param name optional chain name\n * @returns parsed params\n */\nexport function parseGethGenesis(json, name, mergeForkIdPostMerge) {\n  try {\n    if (['config', 'difficulty', 'gasLimit', 'alloc'].some(function (field) {\n      return !(field in json);\n    })) {\n      throw new Error('Invalid format, expected geth genesis fields missing');\n    }\n    if (name !== undefined) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, no-param-reassign\n      json.name = name;\n    }\n    return parseGethParams(json, mergeForkIdPostMerge);\n  } catch (e) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/restrict-template-expressions\n    throw new Error(\"Error parsing parameters file: \".concat(e.message));\n  }\n}\n/**\n * Pads a `String` to have an even length\n * @param value\n * @return output\n */\nexport function padToEven(value) {\n  var a = value;\n  if (typeof a !== 'string') {\n    throw new Error(\"[padToEven] value must be type 'string', received \".concat(typeof a));\n  }\n  if (a.length % 2) a = \"0\".concat(a);\n  return a;\n}\n/**\n * Converts an `Number` to a `Uint8Array`\n * @param {Number} i\n * @return {Uint8Array}\n */\nexport var intToUint8Array = function intToUint8Array(i) {\n  var hex = intToHex(i);\n  return hexToBytes(\"0x\".concat(padToEven(hex.slice(2))));\n};\n/**\n * Attempts to turn a value into a `Uint8Array`.\n * Inputs supported: `Uint8Array` `String` (hex-prefixed), `Number`, null/undefined, `BigInt` and other objects\n * with a `toArray()` or `toUint8Array()` method.\n * @param v the value\n */\nexport var toUint8Array = function toUint8Array(v) {\n  // eslint-disable-next-line no-null/no-null\n  if (v === null || v === undefined) {\n    return new Uint8Array();\n  }\n  if (v instanceof Uint8Array) {\n    return v;\n  }\n  if (Array.isArray(v)) {\n    return Uint8Array.from(v);\n  }\n  if (typeof v === 'string') {\n    if (!isHexString(v)) {\n      throw new Error(\"Cannot convert string to Uint8Array. only supports 0x-prefixed hex strings and this string was given: \".concat(v));\n    }\n    return hexToBytes(padToEven(stripHexPrefix(v)));\n  }\n  if (typeof v === 'number') {\n    return toUint8Array(numberToHex(v));\n  }\n  if (typeof v === 'bigint') {\n    if (v < BigInt(0)) {\n      throw new Error(\"Cannot convert negative bigint to Uint8Array. Given: \".concat(v));\n    }\n    var n = v.toString(16);\n    if (n.length % 2) n = \"0\".concat(n);\n    return toUint8Array(\"0x\".concat(n));\n  }\n  if (v.toArray) {\n    // converts a BN to a Uint8Array\n    return Uint8Array.from(v.toArray());\n  }\n  throw new Error('invalid type');\n};\n/**\n * Converts a {@link Uint8Array} to a {@link bigint}\n */\nexport function uint8ArrayToBigInt(buf) {\n  var hex = bytesToHex(buf);\n  if (hex === '0x') {\n    return BigInt(0);\n  }\n  return BigInt(hex);\n}\n/**\n * Converts a {@link bigint} to a {@link Uint8Array}\n */\nexport function bigIntToUint8Array(num) {\n  return toUint8Array(\"0x\".concat(num.toString(16)));\n}\n/**\n * Returns a Uint8Array filled with 0s.\n * @param bytes the number of bytes the Uint8Array should be\n */\nexport var zeros = function zeros(bytes) {\n  return new Uint8Array(bytes).fill(0);\n};\n/**\n * Pads a `Uint8Array` with zeros till it has `length` bytes.\n * Truncates the beginning or end of input if its length exceeds `length`.\n * @param msg the value to pad (Uint8Array)\n * @param length the number of bytes the output should be\n * @param right whether to start padding form the left or right\n * @return (Uint8Array)\n */\nvar setLength = function setLength(msg, length, right) {\n  var buf = zeros(length);\n  if (right) {\n    if (msg.length < length) {\n      buf.set(msg);\n      return buf;\n    }\n    return msg.subarray(0, length);\n  }\n  if (msg.length < length) {\n    buf.set(msg, length - msg.length);\n    return buf;\n  }\n  return msg.subarray(-length);\n};\n/**\n * Throws if input is not a Uint8Array\n * @param {Uint8Array} input value to check\n */\nexport function assertIsUint8Array(input) {\n  if (!(input instanceof Uint8Array)) {\n    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n    var msg = \"This method only supports Uint8Array but input was: \".concat(input);\n    throw new Error(msg);\n  }\n}\n/**\n * Left Pads a `Uint8Array` with leading zeros till it has `length` bytes.\n * Or it truncates the beginning if it exceeds.\n * @param msg the value to pad (Uint8Array)\n * @param length the number of bytes the output should be\n * @return (Uint8Array)\n */\nexport var setLengthLeft = function setLengthLeft(msg, length) {\n  assertIsUint8Array(msg);\n  return setLength(msg, length, false);\n};\n/**\n * Trims leading zeros from a `Uint8Array`, `String` or `Number[]`.\n * @param a (Uint8Array|Array|String)\n * @return (Uint8Array|Array|String)\n */\nexport function stripZeros(a) {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-assignment\n  var first = a[0];\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-call\n  while (a.length > 0 && first.toString() === '0') {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-assignment, prefer-destructuring, @typescript-eslint/no-unsafe-call, no-param-reassign\n    a = a.slice(1);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, prefer-destructuring, @typescript-eslint/no-unsafe-member-access\n    first = a[0];\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n  return a;\n}\n/**\n * Trims leading zeros from a `Uint8Array`.\n * @param a (Uint8Array)\n * @return (Uint8Array)\n */\nexport var unpadUint8Array = function unpadUint8Array(a) {\n  assertIsUint8Array(a);\n  return stripZeros(a);\n};\n/**\n * Converts a {@link bigint} to a `0x` prefixed hex string\n */\nexport var bigIntToHex = function bigIntToHex(num) {\n  return \"0x\".concat(num.toString(16));\n};\n/**\n * Convert value from bigint to an unpadded Uint8Array\n * (useful for RLP transport)\n * @param value value to convert\n */\nexport function bigIntToUnpaddedUint8Array(value) {\n  return unpadUint8Array(bigIntToUint8Array(value));\n}\nfunction calculateSigRecovery(v, chainId) {\n  if (v === BigInt(0) || v === BigInt(1)) return v;\n  if (chainId === undefined) {\n    return v - BigInt(27);\n  }\n  return v - (chainId * BigInt(2) + BigInt(35));\n}\nfunction isValidSigRecovery(recovery) {\n  return recovery === BigInt(0) || recovery === BigInt(1);\n}\n/**\n * ECDSA public key recovery from signature.\n * NOTE: Accepts `v === 0 | v === 1` for EIP1559 transactions\n * @returns Recovered public key\n */\nexport var ecrecover = function ecrecover(msgHash, v, r, s, chainId) {\n  var recovery = calculateSigRecovery(v, chainId);\n  if (!isValidSigRecovery(recovery)) {\n    throw new Error('Invalid signature v value');\n  }\n  var senderPubKey = new secp256k1.Signature(uint8ArrayToBigInt(r), uint8ArrayToBigInt(s)).addRecoveryBit(Number(recovery)).recoverPublicKey(msgHash).toRawBytes(false);\n  return senderPubKey.slice(1);\n};\nexport function toType(input, outputType) {\n  // eslint-disable-next-line no-null/no-null\n  if (input === null) {\n    // eslint-disable-next-line no-null/no-null\n    return null;\n  }\n  if (input === undefined) {\n    return undefined;\n  }\n  if (typeof input === 'string' && !isHexString(input)) {\n    throw new Error(\"A string must be provided with a 0x-prefix, given: \".concat(input));\n  } else if (typeof input === 'number' && !Number.isSafeInteger(input)) {\n    throw new Error('The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)');\n  }\n  var output = toUint8Array(input);\n  switch (outputType) {\n    case TypeOutput.Uint8Array:\n      return output;\n    case TypeOutput.BigInt:\n      return uint8ArrayToBigInt(output);\n    case TypeOutput.Number:\n      {\n        var bigInt = uint8ArrayToBigInt(output);\n        if (bigInt > BigInt(Number.MAX_SAFE_INTEGER)) {\n          throw new Error('The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)');\n        }\n        return Number(bigInt);\n      }\n    case TypeOutput.PrefixedHexString:\n      return bytesToHex(output);\n    default:\n      throw new Error('unknown outputType');\n  }\n}","map":{"version":3,"names":["isHexPrefixed","isHexString","bytesToHex","hexToBytes","numberToHex","secp256k1","Hardfork","TypeOutput","stripHexPrefix","str","Error","concat","slice","formatNonce","nonce","padStart","intToHex","i","Number","isSafeInteger","toString","parseGethParams","json","_forkMap","mergeForkIdPostMerge","arguments","length","undefined","name","config","difficulty","mixHash","gasLimit","coinbase","baseFeePerGas","extraData","timestamp","genesisTimestamp","chainId","parseInt","eip155Block","eip158Block","params","networkId","genesis","hardfork","hardforks","bootstrapNodes","consensus","clique","type","algorithm","period","_a","blockperiodseconds","epoch","_b","epochlength","ethash","forkMap","_defineProperty","Homestead","Dao","TangerineWhistle","SpuriousDragon","Byzantium","Constantinople","Petersburg","Istanbul","MuirGlacier","Berlin","London","MergeForkIdTransition","postMerge","Shanghai","isTimestamp","ShardingForkDev","forkMapRev","Object","keys","reduce","acc","elem","configHardforkNames","filter","key","map","nameBlock","block","fork","sort","a","b","Infinity","terminalTotalDifficulty","mergeConfig","Merge","ttd","postMergeIndex","findIndex","hf","splice","push","latestHardfork","unshift","Chainstart","parseGethGenesis","some","field","e","message","padToEven","value","intToUint8Array","hex","toUint8Array","v","Uint8Array","Array","isArray","from","BigInt","n","toArray","uint8ArrayToBigInt","buf","bigIntToUint8Array","num","zeros","bytes","fill","setLength","msg","right","set","subarray","assertIsUint8Array","input","setLengthLeft","stripZeros","first","unpadUint8Array","bigIntToHex","bigIntToUnpaddedUint8Array","calculateSigRecovery","isValidSigRecovery","recovery","ecrecover","msgHash","r","s","senderPubKey","Signature","addRecoveryBit","recoverPublicKey","toRawBytes","toType","outputType","output","bigInt","MAX_SAFE_INTEGER","PrefixedHexString"],"sources":["D:\\projects\\react\\wen-base\\node_modules\\web3-eth-accounts\\src\\common\\utils.ts"],"sourcesContent":["/*\nThis file is part of web3.js.\n\nweb3.js is free software: you can redistribute it and/or modify\nit under the terms of the GNU Lesser General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nweb3.js is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Lesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public License\nalong with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\nimport { isHexPrefixed, isHexString } from 'web3-validator';\nimport { bytesToHex, hexToBytes, numberToHex } from 'web3-utils';\nimport { secp256k1 } from '../tx/constants.js';\nimport { Hardfork } from './enums.js';\nimport { ToBytesInputTypes, TypeOutput, TypeOutputReturnType } from './types.js';\n\ntype ConfigHardfork =\n\t// eslint-disable-next-line @typescript-eslint/ban-types\n\t| { name: string; block: null; timestamp: number }\n\t| { name: string; block: number; timestamp?: number };\n\n/**\n * Removes '0x' from a given `String` if present\n * @param str the string value\n * @returns the string without 0x prefix\n */\nexport const stripHexPrefix = (str: string): string => {\n\tif (typeof str !== 'string')\n\t\tthrow new Error(`[stripHexPrefix] input must be type 'string', received ${typeof str}`);\n\n\treturn isHexPrefixed(str) ? str.slice(2) : str;\n};\n/**\n * Transforms Geth formatted nonce (i.e. hex string) to 8 byte 0x-prefixed string used internally\n * @param nonce string parsed from the Geth genesis file\n * @returns nonce as a 0x-prefixed 8 byte string\n */\nfunction formatNonce(nonce: string): string {\n\tif (!nonce || nonce === '0x0') {\n\t\treturn '0x0000000000000000';\n\t}\n\tif (isHexPrefixed(nonce)) {\n\t\treturn `0x${stripHexPrefix(nonce).padStart(16, '0')}`;\n\t}\n\treturn `0x${nonce.padStart(16, '0')}`;\n}\n\n/**\n * Converts a `Number` into a hex `String`\n * @param {Number} i\n * @return {String}\n */\nconst intToHex = function (i: number) {\n\tif (!Number.isSafeInteger(i) || i < 0) {\n\t\tthrow new Error(`Received an invalid integer type: ${i}`);\n\t}\n\treturn `0x${i.toString(16)}`;\n};\n\n/**\n * Converts Geth genesis parameters to an EthereumJS compatible `CommonOpts` object\n * @param json object representing the Geth genesis file\n * @param optional mergeForkIdPostMerge which clarifies the placement of MergeForkIdTransition\n * hardfork, which by default is post merge as with the merged eth networks but could also come\n * before merge like in kiln genesis\n * @returns genesis parameters in a `CommonOpts` compliant object\n */\nfunction parseGethParams(json: any, mergeForkIdPostMerge = true) {\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n\tconst {\n\t\tname,\n\t\tconfig,\n\t\tdifficulty,\n\t\tmixHash,\n\t\tgasLimit,\n\t\tcoinbase,\n\t\tbaseFeePerGas,\n\t}: {\n\t\tname: string;\n\t\tconfig: any;\n\t\tdifficulty: string;\n\t\tmixHash: string;\n\t\tgasLimit: string;\n\t\tcoinbase: string;\n\t\tbaseFeePerGas: string;\n\t} = json;\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n\tlet { extraData, timestamp, nonce }: { extraData: string; timestamp: string; nonce: string } =\n\t\tjson;\n\tconst genesisTimestamp = Number(timestamp);\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n\tconst { chainId }: { chainId: number } = config;\n\n\t// geth is not strictly putting empty fields with a 0x prefix\n\tif (extraData === '') {\n\t\textraData = '0x';\n\t}\n\t// geth may use number for timestamp\n\tif (!isHexPrefixed(timestamp)) {\n\t\t// eslint-disable-next-line radix\n\t\ttimestamp = intToHex(parseInt(timestamp));\n\t}\n\t// geth may not give us a nonce strictly formatted to an 8 byte hex string\n\tif (nonce.length !== 18) {\n\t\tnonce = formatNonce(nonce);\n\t}\n\n\t// EIP155 and EIP158 are both part of Spurious Dragon hardfork and must occur at the same time\n\t// but have different configuration parameters in geth genesis parameters\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\tif (config.eip155Block !== config.eip158Block) {\n\t\tthrow new Error(\n\t\t\t'EIP155 block number must equal EIP 158 block number since both are part of SpuriousDragon hardfork and the client only supports activating the full hardfork',\n\t\t);\n\t}\n\n\tconst params = {\n\t\tname,\n\t\tchainId,\n\t\tnetworkId: chainId,\n\t\tgenesis: {\n\t\t\ttimestamp,\n\t\t\t// eslint-disable-next-line radix\n\t\t\tgasLimit: parseInt(gasLimit), // geth gasLimit and difficulty are hex strings while ours are `number`s\n\t\t\t// eslint-disable-next-line radix\n\t\t\tdifficulty: parseInt(difficulty),\n\t\t\tnonce,\n\t\t\textraData,\n\t\t\tmixHash,\n\t\t\tcoinbase,\n\t\t\tbaseFeePerGas,\n\t\t},\n\t\thardfork: undefined as string | undefined,\n\t\thardforks: [] as ConfigHardfork[],\n\t\tbootstrapNodes: [],\n\t\tconsensus:\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\t\t\tconfig.clique !== undefined\n\t\t\t\t? {\n\t\t\t\t\t\ttype: 'poa',\n\t\t\t\t\t\talgorithm: 'clique',\n\t\t\t\t\t\tclique: {\n\t\t\t\t\t\t\t// The recent geth genesis seems to be using blockperiodseconds\n\t\t\t\t\t\t\t// and epochlength for clique specification\n\t\t\t\t\t\t\t// see: https://hackmd.io/PqZgMpnkSWCWv5joJoFymQ\n\t\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-assignment\n\t\t\t\t\t\t\tperiod: config.clique.period ?? config.clique.blockperiodseconds,\n\t\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access,  @typescript-eslint/no-unsafe-assignment\n\t\t\t\t\t\t\tepoch: config.clique.epoch ?? config.clique.epochlength,\n\t\t\t\t\t\t},\n\t\t\t\t  }\n\t\t\t\t: {\n\t\t\t\t\t\ttype: 'pow',\n\t\t\t\t\t\talgorithm: 'ethash',\n\t\t\t\t\t\tethash: {},\n\t\t\t\t  },\n\t};\n\n\tconst forkMap: { [key: string]: { name: string; postMerge?: boolean; isTimestamp?: boolean } } =\n\t\t{\n\t\t\t[Hardfork.Homestead]: { name: 'homesteadBlock' },\n\t\t\t[Hardfork.Dao]: { name: 'daoForkBlock' },\n\t\t\t[Hardfork.TangerineWhistle]: { name: 'eip150Block' },\n\t\t\t[Hardfork.SpuriousDragon]: { name: 'eip155Block' },\n\t\t\t[Hardfork.Byzantium]: { name: 'byzantiumBlock' },\n\t\t\t[Hardfork.Constantinople]: { name: 'constantinopleBlock' },\n\t\t\t[Hardfork.Petersburg]: { name: 'petersburgBlock' },\n\t\t\t[Hardfork.Istanbul]: { name: 'istanbulBlock' },\n\t\t\t[Hardfork.MuirGlacier]: { name: 'muirGlacierBlock' },\n\t\t\t[Hardfork.Berlin]: { name: 'berlinBlock' },\n\t\t\t[Hardfork.London]: { name: 'londonBlock' },\n\t\t\t[Hardfork.MergeForkIdTransition]: {\n\t\t\t\tname: 'mergeForkBlock',\n\t\t\t\tpostMerge: mergeForkIdPostMerge,\n\t\t\t},\n\t\t\t[Hardfork.Shanghai]: { name: 'shanghaiTime', postMerge: true, isTimestamp: true },\n\t\t\t[Hardfork.ShardingForkDev]: {\n\t\t\t\tname: 'shardingForkTime',\n\t\t\t\tpostMerge: true,\n\t\t\t\tisTimestamp: true,\n\t\t\t},\n\t\t};\n\n\t// forkMapRev is the map from config field name to Hardfork\n\tconst forkMapRev = Object.keys(forkMap).reduce<{ [key: string]: string }>((acc, elem) => {\n\t\tacc[forkMap[elem].name] = elem;\n\t\treturn acc;\n\t}, {});\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n\tconst configHardforkNames = Object.keys(config).filter(\n\t\t// eslint-disable-next-line no-null/no-null, @typescript-eslint/no-unsafe-member-access\n\t\tkey => forkMapRev[key] !== undefined && config[key] !== undefined && config[key] !== null,\n\t);\n\n\tparams.hardforks = configHardforkNames\n\t\t.map(nameBlock => ({\n\t\t\tname: forkMapRev[nameBlock],\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n\t\t\tblock:\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\t\t\t\tforkMap[forkMapRev[nameBlock]].isTimestamp === true ||\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\t\t\t\ttypeof config[nameBlock] !== 'number'\n\t\t\t\t\t? // eslint-disable-next-line no-null/no-null\n\t\t\t\t\t  null\n\t\t\t\t\t: // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\t\t\t\t\t  config[nameBlock],\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n\t\t\ttimestamp:\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\t\t\t\tforkMap[forkMapRev[nameBlock]].isTimestamp === true &&\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\t\t\t\ttypeof config[nameBlock] === 'number'\n\t\t\t\t\t? // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\t\t\t\t\t  config[nameBlock]\n\t\t\t\t\t: undefined,\n\t\t}))\n\t\t// eslint-disable-next-line no-null/no-null\n\t\t.filter(fork => fork.block !== null || fork.timestamp !== undefined) as ConfigHardfork[];\n\n\tparams.hardforks.sort(\n\t\t(a: ConfigHardfork, b: ConfigHardfork) => (a.block ?? Infinity) - (b.block ?? Infinity),\n\t);\n\n\tparams.hardforks.sort(\n\t\t(a: ConfigHardfork, b: ConfigHardfork) =>\n\t\t\t(a.timestamp ?? genesisTimestamp) - (b.timestamp ?? genesisTimestamp),\n\t);\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\tif (config.terminalTotalDifficulty !== undefined) {\n\t\t// Following points need to be considered for placement of merge hf\n\t\t// - Merge hardfork can't be placed at genesis\n\t\t// - Place merge hf before any hardforks that require CL participation for e.g. withdrawals\n\t\t// - Merge hardfork has to be placed just after genesis if any of the genesis hardforks make CL\n\t\t//   necessary for e.g. withdrawals\n\t\tconst mergeConfig = {\n\t\t\tname: Hardfork.Merge,\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-assignment\n\t\t\tttd: config.terminalTotalDifficulty,\n\t\t\t// eslint-disable-next-line no-null/no-null\n\t\t\tblock: null,\n\t\t};\n\n\t\t// Merge hardfork has to be placed before first hardfork that is dependent on merge\n\t\tconst postMergeIndex = params.hardforks.findIndex(\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\t\t\t(hf: any) => forkMap[hf.name]?.postMerge === true,\n\t\t);\n\t\tif (postMergeIndex !== -1) {\n\t\t\tparams.hardforks.splice(postMergeIndex, 0, mergeConfig as unknown as ConfigHardfork);\n\t\t} else {\n\t\t\tparams.hardforks.push(mergeConfig as unknown as ConfigHardfork);\n\t\t}\n\t}\n\n\tconst latestHardfork = params.hardforks.length > 0 ? params.hardforks.slice(-1)[0] : undefined;\n\tparams.hardfork = latestHardfork?.name;\n\tparams.hardforks.unshift({ name: Hardfork.Chainstart, block: 0 });\n\n\treturn params;\n}\n\n/**\n * Parses a genesis.json exported from Geth into parameters for Common instance\n * @param json representing the Geth genesis file\n * @param name optional chain name\n * @returns parsed params\n */\nexport function parseGethGenesis(json: any, name?: string, mergeForkIdPostMerge?: boolean) {\n\ttry {\n\t\tif (['config', 'difficulty', 'gasLimit', 'alloc'].some(field => !(field in json))) {\n\t\t\tthrow new Error('Invalid format, expected geth genesis fields missing');\n\t\t}\n\t\tif (name !== undefined) {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, no-param-reassign\n\t\t\tjson.name = name;\n\t\t}\n\t\treturn parseGethParams(json, mergeForkIdPostMerge);\n\t} catch (e: any) {\n\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/restrict-template-expressions\n\t\tthrow new Error(`Error parsing parameters file: ${e.message}`);\n\t}\n}\n\n/**\n * Pads a `String` to have an even length\n * @param value\n * @return output\n */\nexport function padToEven(value: string): string {\n\tlet a = value;\n\n\tif (typeof a !== 'string') {\n\t\tthrow new Error(`[padToEven] value must be type 'string', received ${typeof a}`);\n\t}\n\n\tif (a.length % 2) a = `0${a}`;\n\n\treturn a;\n}\n\n/**\n * Converts an `Number` to a `Uint8Array`\n * @param {Number} i\n * @return {Uint8Array}\n */\nexport const intToUint8Array = function (i: number) {\n\tconst hex = intToHex(i);\n\treturn hexToBytes(`0x${padToEven(hex.slice(2))}`);\n};\n\n/**\n * Attempts to turn a value into a `Uint8Array`.\n * Inputs supported: `Uint8Array` `String` (hex-prefixed), `Number`, null/undefined, `BigInt` and other objects\n * with a `toArray()` or `toUint8Array()` method.\n * @param v the value\n */\nexport const toUint8Array = function (v: ToBytesInputTypes): Uint8Array {\n\t// eslint-disable-next-line no-null/no-null\n\tif (v === null || v === undefined) {\n\t\treturn new Uint8Array();\n\t}\n\n\tif (v instanceof Uint8Array) {\n\t\treturn v;\n\t}\n\n\tif (Array.isArray(v)) {\n\t\treturn Uint8Array.from(v);\n\t}\n\n\tif (typeof v === 'string') {\n\t\tif (!isHexString(v)) {\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot convert string to Uint8Array. only supports 0x-prefixed hex strings and this string was given: ${v}`,\n\t\t\t);\n\t\t}\n\t\treturn hexToBytes(padToEven(stripHexPrefix(v)));\n\t}\n\n\tif (typeof v === 'number') {\n\t\treturn toUint8Array(numberToHex(v));\n\t}\n\n\tif (typeof v === 'bigint') {\n\t\tif (v < BigInt(0)) {\n\t\t\tthrow new Error(`Cannot convert negative bigint to Uint8Array. Given: ${v}`);\n\t\t}\n\t\tlet n = v.toString(16);\n\t\tif (n.length % 2) n = `0${n}`;\n\t\treturn toUint8Array(`0x${n}`);\n\t}\n\n\tif (v.toArray) {\n\t\t// converts a BN to a Uint8Array\n\t\treturn Uint8Array.from(v.toArray());\n\t}\n\n\tthrow new Error('invalid type');\n};\n\n/**\n * Converts a {@link Uint8Array} to a {@link bigint}\n */\nexport function uint8ArrayToBigInt(buf: Uint8Array) {\n\tconst hex = bytesToHex(buf);\n\tif (hex === '0x') {\n\t\treturn BigInt(0);\n\t}\n\treturn BigInt(hex);\n}\n\n/**\n * Converts a {@link bigint} to a {@link Uint8Array}\n */\nexport function bigIntToUint8Array(num: bigint) {\n\treturn toUint8Array(`0x${num.toString(16)}`);\n}\n\n/**\n * Returns a Uint8Array filled with 0s.\n * @param bytes the number of bytes the Uint8Array should be\n */\nexport const zeros = function (bytes: number): Uint8Array {\n\treturn new Uint8Array(bytes).fill(0);\n};\n\n/**\n * Pads a `Uint8Array` with zeros till it has `length` bytes.\n * Truncates the beginning or end of input if its length exceeds `length`.\n * @param msg the value to pad (Uint8Array)\n * @param length the number of bytes the output should be\n * @param right whether to start padding form the left or right\n * @return (Uint8Array)\n */\nconst setLength = function (msg: Uint8Array, length: number, right: boolean) {\n\tconst buf = zeros(length);\n\tif (right) {\n\t\tif (msg.length < length) {\n\t\t\tbuf.set(msg);\n\t\t\treturn buf;\n\t\t}\n\t\treturn msg.subarray(0, length);\n\t}\n\tif (msg.length < length) {\n\t\tbuf.set(msg, length - msg.length);\n\t\treturn buf;\n\t}\n\treturn msg.subarray(-length);\n};\n\n/**\n * Throws if input is not a Uint8Array\n * @param {Uint8Array} input value to check\n */\nexport function assertIsUint8Array(input: unknown): asserts input is Uint8Array {\n\tif (!(input instanceof Uint8Array)) {\n\t\t// eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n\t\tconst msg = `This method only supports Uint8Array but input was: ${input}`;\n\t\tthrow new Error(msg);\n\t}\n}\n/**\n * Left Pads a `Uint8Array` with leading zeros till it has `length` bytes.\n * Or it truncates the beginning if it exceeds.\n * @param msg the value to pad (Uint8Array)\n * @param length the number of bytes the output should be\n * @return (Uint8Array)\n */\nexport const setLengthLeft = function (msg: Uint8Array, length: number) {\n\tassertIsUint8Array(msg);\n\treturn setLength(msg, length, false);\n};\n\n/**\n * Trims leading zeros from a `Uint8Array`, `String` or `Number[]`.\n * @param a (Uint8Array|Array|String)\n * @return (Uint8Array|Array|String)\n */\nexport function stripZeros<T extends Uint8Array | number[] | string>(a: T): T {\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-assignment\n\tlet first = a[0];\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-call\n\twhile (a.length > 0 && first.toString() === '0') {\n\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-assignment, prefer-destructuring, @typescript-eslint/no-unsafe-call, no-param-reassign\n\t\ta = a.slice(1) as T;\n\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, prefer-destructuring, @typescript-eslint/no-unsafe-member-access\n\t\tfirst = a[0];\n\t}\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-return\n\treturn a;\n}\n\n/**\n * Trims leading zeros from a `Uint8Array`.\n * @param a (Uint8Array)\n * @return (Uint8Array)\n */\nexport const unpadUint8Array = function (a: Uint8Array): Uint8Array {\n\tassertIsUint8Array(a);\n\treturn stripZeros(a);\n};\n\n/**\n * Converts a {@link bigint} to a `0x` prefixed hex string\n */\nexport const bigIntToHex = (num: bigint) => `0x${num.toString(16)}`;\n\n/**\n * Convert value from bigint to an unpadded Uint8Array\n * (useful for RLP transport)\n * @param value value to convert\n */\nexport function bigIntToUnpaddedUint8Array(value: bigint): Uint8Array {\n\treturn unpadUint8Array(bigIntToUint8Array(value));\n}\n\nfunction calculateSigRecovery(v: bigint, chainId?: bigint): bigint {\n\tif (v === BigInt(0) || v === BigInt(1)) return v;\n\n\tif (chainId === undefined) {\n\t\treturn v - BigInt(27);\n\t}\n\treturn v - (chainId * BigInt(2) + BigInt(35));\n}\n\nfunction isValidSigRecovery(recovery: bigint): boolean {\n\treturn recovery === BigInt(0) || recovery === BigInt(1);\n}\n\n/**\n * ECDSA public key recovery from signature.\n * NOTE: Accepts `v === 0 | v === 1` for EIP1559 transactions\n * @returns Recovered public key\n */\nexport const ecrecover = function (\n\tmsgHash: Uint8Array,\n\tv: bigint,\n\tr: Uint8Array,\n\ts: Uint8Array,\n\tchainId?: bigint,\n): Uint8Array {\n\tconst recovery = calculateSigRecovery(v, chainId);\n\tif (!isValidSigRecovery(recovery)) {\n\t\tthrow new Error('Invalid signature v value');\n\t}\n\n\tconst senderPubKey = new secp256k1.Signature(uint8ArrayToBigInt(r), uint8ArrayToBigInt(s))\n\t\t.addRecoveryBit(Number(recovery))\n\t\t.recoverPublicKey(msgHash)\n\t\t.toRawBytes(false);\n\treturn senderPubKey.slice(1);\n};\n\n/**\n * Convert an input to a specified type.\n * Input of null/undefined returns null/undefined regardless of the output type.\n * @param input value to convert\n * @param outputType type to output\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function toType<T extends TypeOutput>(input: null, outputType: T): null;\nexport function toType<T extends TypeOutput>(input: undefined, outputType: T): undefined;\nexport function toType<T extends TypeOutput>(\n\tinput: ToBytesInputTypes,\n\toutputType: T,\n): TypeOutputReturnType[T];\nexport function toType<T extends TypeOutput>(\n\tinput: ToBytesInputTypes,\n\toutputType: T,\n\t// eslint-disable-next-line @typescript-eslint/ban-types\n): TypeOutputReturnType[T] | undefined | null {\n\t// eslint-disable-next-line no-null/no-null\n\tif (input === null) {\n\t\t// eslint-disable-next-line no-null/no-null\n\t\treturn null;\n\t}\n\tif (input === undefined) {\n\t\treturn undefined;\n\t}\n\n\tif (typeof input === 'string' && !isHexString(input)) {\n\t\tthrow new Error(`A string must be provided with a 0x-prefix, given: ${input}`);\n\t} else if (typeof input === 'number' && !Number.isSafeInteger(input)) {\n\t\tthrow new Error(\n\t\t\t'The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)',\n\t\t);\n\t}\n\n\tconst output = toUint8Array(input);\n\n\tswitch (outputType) {\n\t\tcase TypeOutput.Uint8Array:\n\t\t\treturn output as TypeOutputReturnType[T];\n\t\tcase TypeOutput.BigInt:\n\t\t\treturn uint8ArrayToBigInt(output) as TypeOutputReturnType[T];\n\t\tcase TypeOutput.Number: {\n\t\t\tconst bigInt = uint8ArrayToBigInt(output);\n\t\t\tif (bigInt > BigInt(Number.MAX_SAFE_INTEGER)) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t'The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)',\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn Number(bigInt) as TypeOutputReturnType[T];\n\t\t}\n\t\tcase TypeOutput.PrefixedHexString:\n\t\t\treturn bytesToHex(output) as TypeOutputReturnType[T];\n\t\tdefault:\n\t\t\tthrow new Error('unknown outputType');\n\t}\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}