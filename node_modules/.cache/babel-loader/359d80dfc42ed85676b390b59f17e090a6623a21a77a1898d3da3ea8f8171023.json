{"ast":null,"code":"import _regeneratorRuntime from \"D:/projects/react/wen-base/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _classCallCheck from \"D:/projects/react/wen-base/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"D:/projects/react/wen-base/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n/*\nThis file is part of web3.js.\n\nweb3.js is free software: you can redistribute it and/or modify\nit under the terms of the GNU Lesser General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nweb3.js is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Lesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public License\nalong with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar _a;\nimport { OperationTimeoutError } from 'web3-errors';\n/**\n * The class is a simple implementation of a deferred promise with optional timeout functionality,\n * which can be useful when dealing with asynchronous tasks.\n *\n */\nexport var Web3DeferredPromise = /*#__PURE__*/function () {\n  /**\n   *\n   * @param timeout - (optional) The timeout in milliseconds.\n   * @param eagerStart - (optional) If true, the timer starts as soon as the promise is created.\n   * @param timeoutMessage - (optional) The message to include in the timeout erro that is thrown when the promise times out.\n   */\n  function Web3DeferredPromise() {\n    var _this = this;\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        timeout: 0,\n        eagerStart: false,\n        timeoutMessage: 'DeferredPromise timed out'\n      },\n      timeout = _ref.timeout,\n      eagerStart = _ref.eagerStart,\n      timeoutMessage = _ref.timeoutMessage;\n    _classCallCheck(this, Web3DeferredPromise);\n    // public tag to treat object as promise by different libs\n    // eslint-disable-next-line @typescript-eslint/prefer-as-const\n    this[_a] = 'Promise';\n    this._state = 'pending';\n    this._promise = new Promise(function (resolve, reject) {\n      _this._resolve = resolve;\n      _this._reject = reject;\n    });\n    this._timeoutMessage = timeoutMessage;\n    this._timeoutInterval = timeout;\n    if (eagerStart) {\n      this.startTimer();\n    }\n  }\n  /**\n   * Returns the current state of the promise.\n   * @returns 'pending' | 'fulfilled' | 'rejected'\n   */\n  _createClass(Web3DeferredPromise, [{\n    key: \"state\",\n    get: function get() {\n      return this._state;\n    }\n    /**\n     *\n     * @param onfulfilled - (optional) The callback to execute when the promise is fulfilled.\n     * @param onrejected  - (optional) The callback to execute when the promise is rejected.\n     * @returns\n     */\n  }, {\n    key: \"then\",\n    value: function then(onfulfilled, onrejected) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", this._promise.then(onfulfilled, onrejected));\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n    }\n    /**\n     *\n     * @param onrejected - (optional) The callback to execute when the promise is rejected.\n     * @returns\n     */\n  }, {\n    key: \"catch\",\n    value: function _catch(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onrejected) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              return _context2.abrupt(\"return\", this._promise.catch(onrejected));\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n    }\n    /**\n     *\n     * @param onfinally - (optional) The callback to execute when the promise is settled (fulfilled or rejected).\n     * @returns\n     */\n  }, {\n    key: \"finally\",\n    value: function _finally(onfinally) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              return _context3.abrupt(\"return\", this._promise.finally(onfinally));\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n    }\n    /**\n     * Resolves the current promise.\n     * @param value - The value to resolve the promise with.\n     */\n  }, {\n    key: \"resolve\",\n    value: function resolve(value) {\n      this._resolve(value);\n      this._state = 'fulfilled';\n      this._clearTimeout();\n    }\n    /**\n     * Rejects the current promise.\n     * @param reason - The reason to reject the promise with.\n     */\n  }, {\n    key: \"reject\",\n    value: function reject(reason) {\n      this._reject(reason);\n      this._state = 'rejected';\n      this._clearTimeout();\n    }\n    /**\n     * Starts the timeout timer for the promise.\n     */\n  }, {\n    key: \"startTimer\",\n    value: function startTimer() {\n      if (this._timeoutInterval && this._timeoutInterval > 0) {\n        this._timeoutId = setTimeout(this._checkTimeout.bind(this), this._timeoutInterval);\n      }\n    }\n  }, {\n    key: \"_checkTimeout\",\n    value: function _checkTimeout() {\n      if (this._state === 'pending' && this._timeoutId) {\n        this.reject(new OperationTimeoutError(this._timeoutMessage));\n      }\n    }\n  }, {\n    key: \"_clearTimeout\",\n    value: function _clearTimeout() {\n      if (this._timeoutId) {\n        clearTimeout(this._timeoutId);\n      }\n    }\n  }]);\n  return Web3DeferredPromise;\n}();\n_a = Symbol.toStringTag;","map":{"version":3,"names":["OperationTimeoutError","Web3DeferredPromise","_this","_ref","arguments","length","undefined","timeout","eagerStart","timeoutMessage","_classCallCheck","_a","_state","_promise","Promise","resolve","reject","_resolve","_reject","_timeoutMessage","_timeoutInterval","startTimer","_createClass","key","get","value","then","onfulfilled","onrejected","_context","stop","_callee","_catch","catch","_context2","_callee2","_finally","onfinally","finally","_context3","_callee3","_clearTimeout","reason","_timeoutId","setTimeout","_checkTimeout","bind","clearTimeout","Symbol","toStringTag"],"sources":["D:\\projects\\react\\wen-base\\node_modules\\web3-utils\\src\\web3_deferred_promise.ts"],"sourcesContent":["ï»¿/*\nThis file is part of web3.js.\n\nweb3.js is free software: you can redistribute it and/or modify\nit under the terms of the GNU Lesser General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nweb3.js is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Lesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public License\nalong with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nimport { OperationTimeoutError } from 'web3-errors';\nimport { Web3DeferredPromiseInterface } from 'web3-types';\n\n/**\n * The class is a simple implementation of a deferred promise with optional timeout functionality,\n * which can be useful when dealing with asynchronous tasks.\n *\n */\nexport class Web3DeferredPromise<T> implements Promise<T>, Web3DeferredPromiseInterface<T> {\n\t// public tag to treat object as promise by different libs\n\t// eslint-disable-next-line @typescript-eslint/prefer-as-const\n\tpublic [Symbol.toStringTag]: 'Promise' = 'Promise';\n\n\tprivate readonly _promise: Promise<T>;\n\tprivate _resolve!: (value: T | PromiseLike<T>) => void;\n\tprivate _reject!: (reason?: unknown) => void;\n\tprivate _state: 'pending' | 'fulfilled' | 'rejected' = 'pending';\n\tprivate _timeoutId?: NodeJS.Timeout;\n\tprivate readonly _timeoutInterval?: number;\n\tprivate readonly _timeoutMessage: string;\n\n\t/**\n\t *\n\t * @param timeout - (optional) The timeout in milliseconds.\n\t * @param eagerStart - (optional) If true, the timer starts as soon as the promise is created.\n\t * @param timeoutMessage - (optional) The message to include in the timeout erro that is thrown when the promise times out.\n\t */\n\tpublic constructor(\n\t\t{\n\t\t\ttimeout,\n\t\t\teagerStart,\n\t\t\ttimeoutMessage,\n\t\t}: { timeout: number; eagerStart: boolean; timeoutMessage: string } = {\n\t\t\ttimeout: 0,\n\t\t\teagerStart: false,\n\t\t\ttimeoutMessage: 'DeferredPromise timed out',\n\t\t},\n\t) {\n\t\tthis._promise = new Promise<T>((resolve, reject) => {\n\t\t\tthis._resolve = resolve;\n\t\t\tthis._reject = reject;\n\t\t});\n\n\t\tthis._timeoutMessage = timeoutMessage;\n\t\tthis._timeoutInterval = timeout;\n\n\t\tif (eagerStart) {\n\t\t\tthis.startTimer();\n\t\t}\n\t}\n\t/**\n\t * Returns the current state of the promise.\n\t * @returns 'pending' | 'fulfilled' | 'rejected'\n\t */\n\tpublic get state(): 'pending' | 'fulfilled' | 'rejected' {\n\t\treturn this._state;\n\t}\n\t/**\n\t *\n\t * @param onfulfilled - (optional) The callback to execute when the promise is fulfilled.\n\t * @param onrejected  - (optional) The callback to execute when the promise is rejected.\n\t * @returns\n\t */\n\tpublic async then<TResult1, TResult2>(\n\t\tonfulfilled?: (value: T) => TResult1 | PromiseLike<TResult1>,\n\t\tonrejected?: (reason: unknown) => TResult2 | PromiseLike<TResult2>,\n\t): Promise<TResult1 | TResult2> {\n\t\treturn this._promise.then(onfulfilled, onrejected);\n\t}\n\t/**\n\t *\n\t * @param onrejected - (optional) The callback to execute when the promise is rejected.\n\t * @returns\n\t */\n\tpublic async catch<TResult>(\n\t\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t\tonrejected?: (reason: any) => TResult | PromiseLike<TResult>,\n\t): Promise<T | TResult> {\n\t\treturn this._promise.catch(onrejected);\n\t}\n\n\t/**\n\t *\n\t * @param onfinally - (optional) The callback to execute when the promise is settled (fulfilled or rejected).\n\t * @returns\n\t */\n\tpublic async finally(onfinally?: (() => void) | undefined): Promise<T> {\n\t\treturn this._promise.finally(onfinally);\n\t}\n\n\t/**\n\t * Resolves the current promise.\n\t * @param value - The value to resolve the promise with.\n\t */\n\tpublic resolve(value: T | PromiseLike<T>): void {\n\t\tthis._resolve(value);\n\t\tthis._state = 'fulfilled';\n\t\tthis._clearTimeout();\n\t}\n\n\t/**\n\t * Rejects the current promise.\n\t * @param reason - The reason to reject the promise with.\n\t */\n\tpublic reject(reason?: unknown): void {\n\t\tthis._reject(reason);\n\t\tthis._state = 'rejected';\n\t\tthis._clearTimeout();\n\t}\n\n\t/**\n\t * Starts the timeout timer for the promise.\n\t */\n\tpublic startTimer() {\n\t\tif (this._timeoutInterval && this._timeoutInterval > 0) {\n\t\t\tthis._timeoutId = setTimeout(this._checkTimeout.bind(this), this._timeoutInterval);\n\t\t}\n\t}\n\n\tprivate _checkTimeout() {\n\t\tif (this._state === 'pending' && this._timeoutId) {\n\t\t\tthis.reject(new OperationTimeoutError(this._timeoutMessage));\n\t\t}\n\t}\n\n\tprivate _clearTimeout() {\n\t\tif (this._timeoutId) {\n\t\t\tclearTimeout(this._timeoutId);\n\t\t}\n\t}\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}